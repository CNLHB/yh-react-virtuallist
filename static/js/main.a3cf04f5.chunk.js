(this["webpackJsonpyh-react-virtuallist"]=this["webpackJsonpyh-react-virtuallist"]||[]).push([[0],{12:function(e,t,r){},13:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r(0),i=r.n(c),o=r(4),l=r.n(o),u=(r(12),r(3)),s=r(2),a=r(5);function h(e,t,r){return Array.isArray(e)?t(e):(console.error("you must pass array children "),r())}var d=function(e){e.scrollDom,e.referItemHeight,e.renderNumber,e.children;var t=Object(a.a)(e,["scrollDom","referItemHeight","renderNumber","children"]),r=Object(c.useState)({width:0,height:0,top:0,left:0}),l=Object(s.a)(r,2),d=l[0],f=l[1];Object(c.useEffect)((function(){if(e.scrollDom.current){var t=e.scrollDom.current.getBoundingClientRect();f({width:t.width,height:t.height,left:t.left,top:t.top})}}),[e.scrollDom]);var b=Object(c.useState)({width:0,height:0,top:0,left:0}),j=Object(s.a)(b,2),m=j[0],O=j[1],p=Object(c.useRef)(null);Object(c.useEffect)((function(){if(p.current){var e=p.current.getBoundingClientRect();O({width:e.width,height:e.height,left:e.left,top:e.top})}}),[]);var v=Object(c.useMemo)((function(){return m.top-d.top}),[m.top,d.top]),g=Object(c.useMemo)((function(){return h(e.children,(function(t){return t.reduce((function(t,r,n){return t[n]=e.referItemHeight,t}),{})}),(function(){}))}),[e.children,e.referItemHeight]),x=Object(c.useState)((function(){return Object.values(g).reduce((function(e,t){return e+t}),0)})),y=Object(s.a)(x,2),D=y[0],w=y[1];Object(c.useEffect)((function(){w(Object.values(g).reduce((function(e,t){return e+t}),0))}),[g]);var N=Object(c.useMemo)((function(){return{}}),[]),E=Object(c.useMemo)((function(){return h(e.children,(function(e){return e.map((function(e,t){var r=e.props;return i.a.cloneElement(e,Object(u.a)(Object(u.a)({},r),{},{ref:function(e){N[t]=e}}))}))}),(function(){return[]}))}),[e.children,N]),H=Object(c.useState)((function(){return h(E,(function(t){return t.slice(0,e.renderNumber)}),(function(){return[]}))})),S=Object(s.a)(H,2),M=S[0],k=S[1];Object(c.useLayoutEffect)((function(){N[0]&&new Array(e.renderNumber).fill(1).forEach((function(e,t){var r=N[t].getBoundingClientRect().height||g[t];g[t]=r}))}),[]);var C=Object(c.useState)(0),R=Object(s.a)(C,2),I=R[0],B=R[1],A=Object(c.useMemo)((function(){return{start:e.renderNumber}}),[e.renderNumber]),L=Object(c.useMemo)((function(){return D-d.height}),[D,d.height]);return Object(c.useEffect)((function(){var t,r;return e.scrollDom.current&&(t=function(t){var n=t.target.scrollTop,c=0,i=0;Object.values(g).some((function(e,t){return(c+=e)>n&&(i=t,!0)}));var l=e.renderNumber+i>E.length?E.length:e.renderNumber+i,u=A.start;u<l&&u<E.length&&(r=window.setTimeout((function(){for(var e=u;e<l;e++)if(N[e]){var t=N[e].getBoundingClientRect().height||g[e];g[e]=t}w(Object.values(g).reduce((function(e,t){return e+t}),0)),A.start=l;for(var r=0;r<u;r++)N[r]&&delete N[r]})));var s=n-v;s<0?s=0:s>=L&&(s=L),Object(o.unstable_batchedUpdates)((function(){k(E.slice(0+i,l)),B(s)}))},e.scrollDom.current.addEventListener("scroll",t)),function(){e.scrollDom.current&&e.scrollDom.current.removeEventListener("scroll",t),window.clearTimeout(r)}}),[g,E,A,L,e.referItemHeight,e.renderNumber,e.scrollDom,N,v]),Object(n.jsxs)("div",Object(u.a)(Object(u.a)({className:"yh-supervirtuallist",style:{display:"flex",position:"relative",width:"100%"}},t),{},{children:[Object(n.jsx)("div",{style:{height:D}}),Object(n.jsxs)("div",{ref:p,style:{position:"absolute",transform:"translate3d(0px, ".concat(I,"px, 0px)"),width:"100%"},children:[M,Object(n.jsx)("div",{style:{height:"1px"}})]})]}))};function f(e,t,r){return Array.isArray(e)?t(e):(console.error("you must pass array children "),r())}var b=function(e){e.children,e.scrollDom,e.itemHeight,e.renderNumber;var t=Object(a.a)(e,["children","scrollDom","itemHeight","renderNumber"]),r=Object(c.useState)({width:0,height:0,top:0,left:0}),i=Object(s.a)(r,2),l=i[0],h=i[1];Object(c.useEffect)((function(){if(e.scrollDom.current){var t=e.scrollDom.current.getBoundingClientRect();h({width:t.width,height:t.height,left:t.left,top:t.top})}}),[e.scrollDom]);var d=Object(c.useState)({width:0,height:0,top:0,left:0}),b=Object(s.a)(d,2),j=b[0],m=b[1],O=Object(c.useRef)(null);Object(c.useEffect)((function(){if(O.current){var e=O.current.getBoundingClientRect();m({width:e.width,height:e.height,left:e.left,top:e.top})}}),[]);var p=Object(c.useMemo)((function(){return j.top-l.top}),[j.top,l.top]),v=Object(c.useMemo)((function(){return f(e.children,(function(t){return t.length*e.itemHeight-p}),(function(){return 0}))}),[e.children,e.itemHeight,p]),g=Object(c.useState)((function(){return f(e.children,(function(t){return t.slice(0,e.renderNumber)}),(function(){return null}))})),x=Object(s.a)(g,2),y=x[0],D=x[1],w=Object(c.useState)(0),N=Object(s.a)(w,2),E=N[0],H=N[1];return Object(c.useEffect)((function(){var t;return e.scrollDom.current&&(t=function(t){var r=t.target.scrollTop,n=Math.floor(r/e.itemHeight),c=r-p;c<0?c=0:c>=v-l.height&&(c=v-l.height),Object(o.unstable_batchedUpdates)((function(){D(f(e.children,(function(t){return t.slice(0+n,e.renderNumber+n)}),(function(){return null}))),H(c)}))},e.scrollDom.current.addEventListener("scroll",t)),function(){e.scrollDom.current&&e.scrollDom.current.removeEventListener("scroll",t)}}),[v,e.children,e.itemHeight,e.renderNumber,e.scrollDom,l.height,p]),Object(n.jsxs)("div",Object(u.a)(Object(u.a)({className:"yh-virtuallist",style:{display:"flex",position:"relative",width:"100%"}},t),{},{children:[Object(n.jsx)("div",{style:{height:v}}),Object(n.jsx)("div",{ref:O,style:{position:"absolute",transform:"translate3d(0px, ".concat(E,"px, 0px)"),width:"100%"},children:y})]}))},j=new Array(1e4).fill(1).map((function(e,t){return t}));var m=function(e){return Object(n.jsxs)("div",{children:["this text in the current component",Object(n.jsx)("div",{children:Object(n.jsx)(b,{renderNumber:25,itemHeight:30,scrollDom:e.scrollDom,children:j.map((function(e,t){return Object(n.jsx)("div",{style:{border:"1px solid black",height:"30px"},children:e},t)}))})})]})},O=new Array(1e4).fill(1).map((function(e,t){return t}));var p=function(e){return Object(n.jsx)("div",{children:Object(n.jsx)("div",{children:Object(n.jsx)(d,{scrollDom:e.scrollDom,referItemHeight:25,renderNumber:30,children:O.map((function(e,t){return Object(n.jsx)("div",{style:{border:"1px solid black",height:"".concat(30*Math.random()+20,"px")},children:e},t)}))})})})};var v=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null);return Object(n.jsxs)("div",{style:{display:"flex"},children:[Object(n.jsxs)("div",{style:{height:"500px",border:"1px solid black",overflow:"auto"},ref:e,children:["child use to mock scroll dom. this text in the scroll dom.",Object(n.jsx)(m,{scrollDom:e})]}),Object(n.jsxs)("div",{style:{height:"500px",border:"1px solid black",overflow:"auto"},ref:t,children:["child use to mock scroll dom. this text in the scroll dom.",Object(n.jsx)(p,{scrollDom:t})]})]})};var g=function(){return Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(n.jsx)("div",{style:{padding:"10px",fontSize:"20px"},children:"Mock Title "}),Object(n.jsx)("div",{style:{padding:"10px",fontSize:"20px"},children:"it mock have distance from the top"}),Object(n.jsx)(v,{})]})},x=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,14)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;r(e),n(e),c(e),i(e),o(e)}))};l.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(g,{})}),document.getElementById("root")),x()}},[[13,1,2]]]);
//# sourceMappingURL=main.a3cf04f5.chunk.js.map